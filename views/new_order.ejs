<!DOCTYPE html>
<html lang="pl">

<head>
  <meta charset="UTF-8">
  <title>Sample Site</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
  <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
  <script>
    window.onload = function () {
      var now = new Date();
      var day = ("0" + now.getDate()).slice(-2);
      var month = ("0" + (now.getMonth() + 1)).slice(-2);
      var today = now.getFullYear() + "-" + month + "-" + day;
      console.log(today);
      let status;
      // fetch('/home/new_order')
      //   .then((res) => { 
      //     status = res.status; 
      //     return res.json() 
      //   })
      //   .then((jsonData) => {
      //     console.log(jsonData);
      //     console.log(status);
      //   })
      //   .catch((err) => {
      //     // handle error for example
      //     console.error(err);
      //   });



      //  fetch('/home/new_order', { method: 'POST' })
      //   .then(res => res.text())
      //   .then(body => console.log(body));

      // const axios = require('axios');

      // Make a request for a user with a given ID
      axios.get('/home/new_order', {
        params: {
          ID: 12345
        }
      })
        .then(function (response) {
          // handle success
          console.log(response.data);
        })
        .catch(function (error) {
          // handle error
          console.log(error);
        })
        .finally(function () {
          // always executed
        });


    }
  </script>
</head>

<body>
  <div class="container">
    <!-- Static navbar -->
    <nav class="navbar navbar-default">
      <div class="container-fluid">
        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li class="active"><a href="/home/orders">Historia zamówień</a></li>
          </ul>
          <ul class="nav navbar-nav navbar-right">
            <li><a href="/home/logout">Wylogowanie</a></li>
          </ul>
        </div>
        <!--/.nav-collapse -->
      </div>
      <!--/.container-fluid -->
    </nav>

    <!-- Main component for a primary marketing message or call to action -->
    <div class="jumbotron">
      <h2>Witaj <%=fname%>,</h2>
      <p>
        Zamówic online lunch możesz tylko do godziny 10.00, pozostało ci jeszce
        XXX czasu do zamówienia
      </p>
      <p>
        Wybierz datę na kiedy zamawiasz lunch
      </p>
      <input type="date" name="lunch_order" id="lunch_order" value="2020-01-08" />
      <br /><br />
      <p>
        Lista twoich aktualnych zamówień:
      </p>
      <p><%#=dataSet%></p>

      <div>
        <table id="apps"></table>
      </div>
      <br>
      <div id="mytable2">

      </div>
      <br>

      <p>
        Masz do wyborów dwóch dostawców Mucha i Opoka, kliknij odpowiednią
        zakładkę
      </p>
      <!-- dynamic tabs -->
      <ul class="nav nav-tabs">
        <li class="active"><a data-toggle="tab" href="#mucha">Mucha</a></li>
        <li><a data-toggle="tab" href="#opoka">Opoka</a></li>
      </ul>
      <div class="tab-content">
        <div id="mucha" class="tab-pane fade in active">
          <h3>Mucha</h3>
          <p>wybierz danie: </p>
          <%menu_json=JSON.parse(menu_json)%>
          <div class="table-responsive">
            <table class="table table-bordered">
              <thead>
                <tr>
                  <th scope="col">ID</th>
                  <th scope="col">Dostawca</th>
                  <th scope="col">Numer dania</th>
                  <th scope="col">Danie</th>
                  <th scope="col">Cena</th>
                  <th scope="col">Zamów</th>
                </tr>
              </thead>
              <tbody>
                <% for(var i=0; i < menu_json.length; i++) { %>
                <tr>
                  <td><%= menu_json[i].id %></td>
                  <td><%= menu_json[i].supplier_name %></td>
                  <td><%= menu_json[i].menu_no %></td>
                  <td><%= menu_json[i].menu_desctription %></td>
                  <td><%= menu_json[i].menu_price %></td>
                  <td><button type="button" value=<%= menu_json[i].menu_no %>>Zamów nr.
                      <%= menu_json[i].menu_no %></button></td>
                </tr>
                <% } %>
              </tbody>
            </table>
          </div>
          <!-- <div id="myContacts"></div> -->
        </div>
        <div id="opoka" class="tab-pane fade">
          <h3>Opoka</h3>
          <p>wybierz danie:</p>
        </div>
      </div>
    </div>
  </div>
</body>

</html>