<!DOCTYPE html>
<html lang="pl">

<head>
  <meta charset="UTF-8">
  <title>Sample Site</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
  <script>
    window.onload = function () {
      var now = new Date();
      var day = ("0" + now.getDate()).slice(-2);
      var month = ("0" + (now.getMonth() + 1)).slice(-2);
      var today = now.getFullYear() + "-" + month + "-" + day;      
      console.log(today);

      generateDynamicTable();
    }
    var myContacts = [{
        id: 1,
        Id_sesa_no: 1,
        order_date: "2020-01-08",
        order_supplier_name: "Opoka",
        order_no: 1,
        order_name: "Kotlet",
        order_price: 7
        },
        {
        id: 1,
        Id_sesa_no: 1,
        order_date: "2020-01-08",
        order_supplier_name: "Opoka",
        order_no: 1,
        order_name: "Kotlet",
        order_price: 7
        }
      ];

      function myOrder() {
        alert("zamówienie");
      }

      function generateDynamicTable() {
        var noOfContacts = myContacts.length;

        if (noOfContacts > 0) {
          // CREATE DYNAMIC TABLE.
          var table = document.createElement("table");
          table.style.width = "50%";
          table.setAttribute("border", "1");
          table.setAttribute("cellspacing", "0");
          table.setAttribute("cellpadding", "5");

          // retrieve column header ('Name', 'Email', and 'Mobile')

          var col = []; // define an empty array
          for (var i = 0; i < noOfContacts; i++) {
            for (var key in myContacts[i]) {
              if (col.indexOf(key) === -1) {
                col.push(key);
              }
            }
          }
          col.push("Zamów");
          // CREATE TABLE HEAD .
          var tHead = document.createElement("thead");

          // CREATE ROW FOR TABLE HEAD .
          var hRow = document.createElement("tr");

          // ADD COLUMN HEADER TO ROW OF TABLE HEAD.
          for (var i = 0; i < col.length; i++) {
            var th = document.createElement("th");
            th.innerHTML = col[i];
            hRow.appendChild(th);
          }
          tHead.appendChild(hRow);
          table.appendChild(tHead);

          // CREATE TABLE BODY .
          var tBody = document.createElement("tbody");

          // ADD COLUMN HEADER TO ROW OF TABLE HEAD.
          for (var i = 0; i < noOfContacts; i++) {
            var bRow = document.createElement("tr"); // CREATE ROW FOR EACH RECORD .

            for (var j = 0; j < col.length; j++) {
              var td = document.createElement("td");
              td.innerHTML = myContacts[i][col[j]];
              if (j == col.length - 1) {
                //console.log(j);
                // td.innerHTML = "zamów !!!"
                td.innerHTML = '<input type="button" value = "Zamów" onClick="Javacsript:myOrder(this)">';
                }
              bRow.appendChild(td);
            }
            tBody.appendChild(bRow);
          }
          table.appendChild(tBody);

          // FINALLY ADD THE NEWLY CREATED TABLE WITH JSON DATA TO A CONTAINER.
          var divContainer = document.getElementById("myContacts");
          // divContainer.innerHTML = "tabela";
          divContainer.appendChild(table);
        }
      }
  </script>
</head>

<body>
  <div class="container">
    <!-- Static navbar -->
    <nav class="navbar navbar-default">
      <div class="container-fluid">
        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <!-- <li class="active"><a href="/home/new_order">Zamów Obiad</a></li> -->
            <li class="active"><a href="/home/orders">Historia zamówień</a></li>
          </ul>
          <ul class="nav navbar-nav navbar-right">
            <li><a href="/home/logout">Wylogowanie</a></li>
          </ul>
        </div>
        <!--/.nav-collapse -->
      </div>
      <!--/.container-fluid -->
    </nav>

    <!-- Main component for a primary marketing message or call to action -->
    <div class="jumbotron">
      <h2>Witaj <%=fname%>,</h2>
      <p>
        Zamówic online lunch możesz tylko do godziny 10.00, pozostało ci jeszce
        XXX czasu do zamówienia
      </p>
      <p>
        Wybierz datę na kiedy zamawiasz lunch
      </p>
      <input type="date" name="lunch_order" id="lunch_order" value="2020-01-08" />
      <br /><br />
      <p>
        Lista twoich aktualnych zamówień:
      </p>
      <p><%=dataSet%></p>

      <div>
        <table id="apps"></table>
      </div>
      <br>
      <div id="mytable2">

      </div>
      <br>

      <p>
        Masz do wyborów dwóch dostawców Mucha i Opoka, kliknij odpowiednią
        zakładkę
      </p>
      <!-- dynamic tabs -->
      <ul class="nav nav-tabs">
        <li class="active"><a data-toggle="tab" href="#mucha">Mucha</a></li>
        <li><a data-toggle="tab" href="#opoka">Opoka</a></li>
      </ul>
      <div class="tab-content">
        <div id="mucha" class="tab-pane fade in active">
          <h3>Mucha</h3>
          <p>wybierz danie:</p>
          <div id="myContacts"></div>
        </div>
        <div id="opoka" class="tab-pane fade">
          <h3>Opoka</h3>
          <p>wybierz danie:</p>
        </div>
      </div>
    </div>
</body>
</html>